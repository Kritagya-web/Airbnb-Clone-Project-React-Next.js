(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{7802:function(n,e,r){"use strict";r.r(e),r.d(e,{__N_SSP:function(){return A},default:function(){return R}});var t=r(5893),o=r(1385),i=(r(9008),r(9565)),a=r(2651),s=r(7261),l=r(6265),c=r(7294),d=r(9163),p=r(1163),m=r(9546),u=r(5675),g=r(7811),h=r(2575);function f(){var n=(0,s.Z)(["\n  border-radius: 1rem;\n  position: relative;\n\n  .carousel {\n    position: relative;\n    width: 100%;\n    display: fix;\n    border-radius: 1rem;\n    overflow: scroll;\n    transition: all 0.2s;\n    scroll-behavior: smooth;\n    scroll-snap-type: x mandatory;\n\n    &::-webkit-scrollbar {\n      display: none;\n      -webkit-appearance: none;\n    }\n    .img {\n      flex: 0 0 100%;\n      padding-bottom: 66.67%;\n      position: relative;\n      scroll-snap-align: start;\n\n      &.loading {\n        animation: shimmer 2s infinite;\n        background: linear-gradient(\n          to right,\n          #eff1f3 4%,\n          #e2e2e2 25%,\n          #eff1f3 36%\n        );\n        background-size: 1000px 100%;\n      }\n    }\n\n    img {\n      transition: transform 0.2s;\n    }\n  }\n\n  @keyframes shimmer {\n    0% {\n      background-position: -1000px 0;\n    }\n    100% {\n      background-position: 1000px 0;\n    }\n  }\n\n  .scroller {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    z-index: 2;\n    width: fit-content;\n    left: 50%;\n    transform: translate(-50%, -2rem);\n\n    &::-webkit-scrollbar {\n      display: none;\n      -webkit-appearance: none;\n    }\n    span {\n      display: block;\n      width: 0.3rem;\n      height: 0.3rem;\n      background: #fff;\n      opacity: 0.5;\n      transition: all 0.2s;\n      margin: 1rem 0.25rem;\n      border-radius: 50%;\n      cursor: pointer;\n      box-shadow: 0 0.1rem 0.2rem #002;\n    }\n    span.active {\n      opacity: 1;\n      transform: scale(1.2);\n    }\n  }\n\n  .details {\n    padding: 1rem 0.25rem;\n    transition: transform 0.2s;\n    width: 100%;\n  }\n\n  svg.heart {\n    height: 1.5rem;\n    position: absolute;\n    z-index: 2;\n    right: 1rem;\n    top: 1rem;\n    transition: all 0.2s;\n    color: #fff;\n    &.liked {\n      stroke: var(--red);\n      fill: var(--red);\n      filter: drop-shadow(0 0.15rem 0.25rem #0008);\n    }\n  }\n  .rating {\n    display: flex;\n    align-items: center;\n    width: fit-content;\n    margin-bottom: 0.25rem;\n    small {\n      color: #889;\n      font-size: 100%;\n      margin-left: 0.25rem;\n    }\n    svg {\n      stroke: none;\n      fill: var(--red);\n      height: 1rem;\n      margin-right: 0.25rem;\n    }\n  }\n  .subtitle {\n    font-size: 1rem;\n  }\n  h2 {\n    font-size: 1.15rem;\n    font-weight: 600;\n    margin: 0.25rem 0 0.5rem;\n    line-height: 1.2;\n  }\n  .price {\n    font-weight: 700;\n    font-size: 1.15rem;\n    small {\n      font-weight: 400;\n    }\n  }\n  .description,\n  .total {\n    display: none;\n    color: #889;\n  }\n\n  &:hover {\n    background: var(--white);\n    box-shadow: 0 0.5rem 1rem #48484810;\n\n    .img img {\n      transform: scale(1.05);\n    }\n    .details {\n      transform: scale(0.95);\n    }\n  }\n\n  @media (min-width: 48rem) {\n    display: flex;\n    gap: 1.5rem;\n\n    .carousel {\n      flex: 0 0 300px;\n    }\n    .details {\n      padding-right: 1rem;\n    }\n    .description {\n      display: block;\n      margin-bottom: 1rem;\n    }\n    .subtitle,\n    .description {\n      display: flex;\n    }\n    .price {\n      display: flex;\n      width: 100%;\n      flex-direction: column;\n      align-items: flex-end;\n      & .total {\n        font-weight: 400;\n        font-size: 0.85rem;\n        color: #889;\n        display: inline-block;\n      }\n    }\n    .rating {\n      position: absolute;\n      bottom: 0.75rem;\n      margin-left: -0.5rem;\n    }\n    svg.heart {\n      color: var(--dark);\n      &.liked {\n        filter: none;\n      }\n    }\n    .scroller {\n      left: 150px;\n      bottom: -1.5rem;\n      span {\n        box-shadow: 0 1px 2px #000;\n      }\n    }\n    &:hover {\n      background: var(--white);\n      box-shadow: 0 0.5rem 1rem #48484810;\n\n      .carousel {\n        transform: scale(0.93);\n      }\n      .img img {\n        transform: scale(1);\n      }\n      .details {\n        transform: scale(1);\n      }\n    }\n  }\n"]);return f=function(){return n},n}function b(n){var e=n.imgSrc,r=n.location,o=n.title,i=n.description,a=n.star,s=n.total,l=n.price,d=n.lat,p=n.onClick,m=(0,c.useState)(!1),u=m[0],f=m[1],b=(0,c.useRef)(null),w=(0,c.useState)(0),y=w[0],j=w[1],k=function(n){return j(Math.round(n.target.scrollLeft/n.target.offsetWidth))};return(0,c.useEffect)((function(){var n=b.current;return n.addEventListener("scroll",k),function(){return n.removeEventListener("scroll",k)}}),[]),(0,t.jsxs)(v,{onClick:p,children:[(0,t.jsx)("div",{ref:b,className:"carousel",children:e.map((function(n,e){return(0,t.jsx)(x,{url:n,location:r},e)}))}),(null===e||void 0===e?void 0:e.length)>1&&(0,t.jsx)("div",{className:"scroller",children:e.map((function(n,e){return(0,t.jsx)("span",{className:y===e?"active":null,onClick:function(n){var r;n.stopPropagation(),r=e,b.current.scrollLeft=b.current.offsetWidth*r}},e)}))}),(0,t.jsx)(g.Z,{className:"heart ".concat(u?"liked":null),onClick:function(n){n.stopPropagation(),f(!u)}}),(0,t.jsxs)("div",{className:"details",children:[(0,t.jsxs)("div",{className:"rating",children:[(0,t.jsx)(h.Z,{className:"star"})," ",a," ",(0,t.jsxs)("small",{children:["(",String(d).split(".")[1].substring(0,3),")"]})]}),(0,t.jsx)("p",{className:"subtitle",children:r}),(0,t.jsx)("h2",{children:o}),(0,t.jsx)("p",{className:"description",children:i}),(0,t.jsxs)("p",{className:"price",children:[(0,t.jsxs)("span",{children:[l.split(" ")[0]," ",(0,t.jsx)("small",{children:"/night"})]}),(0,t.jsx)("span",{className:"total",children:s})]})]})]})}var x=function(n){n.index;var e=n.url,r=n.location,o=(0,c.useState)(!0),i=o[0],a=o[1];return(0,t.jsx)("div",{className:"img ".concat(i?"loading":null),children:(0,t.jsx)(u.default,{layout:"fill",alt:r,objectFit:"cover",src:"/images/results/".concat(e),onLoadingComplete:function(){return a(!1)}})})},v=d.ZP.div(f()),w=r(9459),y=r(2371),j=r(5169);function k(){var n=(0,s.Z)(['\n  height: fit-content;\n  padding: 3rem var(--sidePadding);\n  z-index: 1;\n  position: relative;\n  border-radius: 1.5rem 1.5rem 0 0;\n  box-shadow: 0 -1rem 2rem -1rem #0003;\n  background: var(--light);\n  max-width: calc(var(--containerWidth) + 2 * var(--sidePadding));\n  margin: 0 auto;\n\n  .inner {\n    display: flex;\n    flex-direction: column;\n  }\n  .navigation {\n    display: flex;\n    padding-top: 1.5rem;\n    align-items: center;\n    button,\n    span {\n      background: var(--gray);\n      border: none;\n      border-radius: 99px;\n      display: grid;\n      place-items: center;\n      width: 3rem;\n      height: 3rem;\n      outline: none;\n      &:hover,\n      &:focus {\n        box-shadow: 0 0 0 1px var(--dark);\n      }\n    }\n    span {\n      width: 2rem;\n      height: 2rem;\n      margin: 0 0.75rem;\n      user-select: none;\n      cursor: pointer;\n\n      @media (max-width: 36rem) {\n        display: none;\n      }\n      &.active {\n        background: var(--dark);\n        color: var(--light);\n      }\n    }\n\n    button.prev {\n      margin-right: auto;\n    }\n    button.next {\n      margin-left: auto;\n    }\n  }\n  h1 {\n    font-weight: 800;\n    font-size: clamp(1.5rem, 3vw, 2rem);\n    line-height: 1.2;\n    margin-top: 1rem;\n  }\n  .date {\n    padding: 0.25rem 0.5rem;\n    border-radius: 0.5rem;\n    background: var(--gray);\n    white-space: nowrap;\n    line-height: 2;\n    font-size: 90%;\n  }\n\n  .results {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n    gap: 1.5rem;\n    padding: var(--sidePadding) 0;\n\n    @media (min-width: 48rem) {\n      grid-template-columns: 1fr;\n    }\n  }\n\n  @media (max-width: 36rem) {\n    &::before {\n      position: absolute;\n      content: "";\n      background: var(--dark);\n      width: 3rem;\n      height: 3px;\n      border-radius: 3px;\n      opacity: 0.25;\n      top: 0.75rem;\n      left: calc(50% - 1.5rem);\n    }\n    .details {\n      font-size: 0.85rem;\n    }\n  }\n']);return k=function(){return n},n}function O(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,t)}return r}function N(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){(0,l.Z)(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function P(n){var e=n.results,r=n.setViewport,o=n.setSelectedLocation,i=(0,p.useRouter)(),a=(0,m.default)(new Date(i.query.checkIn),"do MMM, yyyy"),s=(0,m.default)(new Date(i.query.checkOut),"do MMM, yyyy");return(0,t.jsx)(S,{className:"hero",children:(0,t.jsxs)("div",{className:"inner",children:[(0,t.jsxs)("p",{className:"details",children:["300+ stays - ",(0,t.jsx)("span",{className:"date",children:a})," to"," ",(0,t.jsx)("span",{className:"date",children:s})," for ",i.query.guests," ","guests"]}),(0,t.jsxs)("h1",{children:["Stays in ",i.query.location]}),(0,t.jsx)("div",{className:"results",children:e.map((function(n,e){return(0,c.createElement)(b,N(N({onClick:function(){return function(n){o(n),r({latitude:n.lat-.01,longitude:n.long,zoom:11}),console.log(n),window.scrollTo({top:0,behavior:"smooth"})}({lat:n.lat,long:n.long,index:e})}},n),{},{imgSrc:w.VW[e],key:e}))}))}),(0,t.jsxs)("div",{className:"navigation",children:[(0,t.jsx)("button",{className:"prev","aria-label":"previous",children:(0,t.jsx)(y.Z,{})}),(0,t.jsx)("span",{className:"active",children:"1"}),(0,t.jsx)("span",{children:"2"}),(0,t.jsx)("span",{children:"3"}),"...",(0,t.jsx)("span",{children:"8"}),(0,t.jsx)("span",{children:"9"}),(0,t.jsx)("button",{className:"next","aria-label":"next",children:(0,t.jsx)(j.Z,{})})]})]})})}var S=d.ZP.section(k()),Z=r(6629),z=r(4856);function M(){var n=(0,s.Z)(["\n  background: linear-gradient(to top, var(--dark), transparent),\n    url(/images/results/",");\n  background-size: cover;\n  padding: 5rem 1rem 0.5rem;\n  box-shadow: 0 0.25rem 0.5rem #0002;\n  border-radius: 1rem;\n  color: var(--white);\n"]);return M=function(){return n},n}function E(){var n=(0,s.Z)(['\n  width: 100%;\n  height: 90vh;\n  z-index: 1;\n  margin-bottom: -35vh;\n  background: var(--gray);\n  position: relative;\n\n  &::before {\n    content: "";\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: linear-gradient(to top, var(--light) 30%, transparent);\n    z-index: 3;\n    height: 20vh;\n    pointer-events: none;\n  }\n\n  .mapMarker {\n    position: relative;\n    animation: markerAnim 0.5s infinite ease-out alternate;\n    &.active {\n      animation-play-state: paused;\n      &::before {\n        animation-play-state: paused;\n      }\n    }\n    &::before {\n      content: "";\n      position: absolute;\n      width: 1rem;\n      height: 0.25rem;\n      background: var(--dark);\n      transform-origin: bottom center;\n      filter: blur(2px);\n      border-radius: 100%;\n      bottom: 0.125rem;\n      left: 0.25rem;\n      z-index: -1;\n      opacity: 0.5;\n      animation: markerShadowAnim 0.5s infinite ease-out alternate;\n    }\n  }\n  @keyframes markerAnim {\n    to {\n      transform: translateY(-0.5rem);\n    }\n  }\n  @keyframes markerShadowAnim {\n    to {\n      transform: translateY(0.5rem) scale(0.25);\n      opacity: 1;\n    }\n  }\n  .mapPin {\n    stroke: none;\n    fill: var(--red);\n    circle {\n      fill: var(--gray);\n    }\n  }\n  .mapboxgl-popup {\n    z-index: 1;\n  }\n\n  .mapboxgl-popup-content {\n    border-radius: 1rem;\n    padding: 0;\n    max-width: 240px;\n    width: 75%;\n    background: var(--dark);\n  }\n  .mapboxgl-popup-close-button {\n    right: 0;\n    top: 0;\n    color: var(--white);\n    line-height: 1;\n    z-index: 98;\n    background: var(--red);\n    height: 1.5rem;\n    width: 1.5rem;\n    border-radius: 0 1rem 0 1rem;\n    box-shadow: -0.5rem 0.5rem 0.5rem #0002;\n  }\n\n  .mapboxgl-popup-anchor-top .mapboxgl-popup-tip {\n    border-bottom-color: var(--dark);\n  }\n  .mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip {\n    border-bottom-color: var(--dark);\n  }\n  .mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip {\n    border-bottom-color: var(--dark);\n  }\n  .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip {\n    border-top-color: var(--dark);\n  }\n  .mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip {\n    border-bottom: none;\n    border-left: none;\n    border-top-color: var(--dark);\n  }\n  .mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip {\n    border-top-color: var(--dark);\n  }\n  .mapboxgl-popup-anchor-left .mapboxgl-popup-tip {\n    border-right-color: var(--dark);\n  }\n  .mapboxgl-popup-anchor-right .mapboxgl-popup-tip {\n    border-left-color: var(--dark);\n  }\n\n  @media (min-width: 48rem) {\n    margin-bottom: -50vh;\n    height: calc(100vh + 10rem);\n\n    .mapboxgl-popup-content {\n      width: 360px;\n    }\n  }\n']);return E=function(){return n},n}function _(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,t)}return r}function D(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){(0,l.Z)(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function L(n){var e=n.results,r=n.selectedLocation,o=n.setSelectedLocation,i=n.viewport,a=n.setViewport,s=(0,c.useRef)(null),l=function(){window.scrollY<1.2*window.innerHeight&&(s.current.style.transform="translateY("+.2*window.scrollY+"px)")};return(0,c.useEffect)((function(){s.current;return window.addEventListener("scroll",l),function(){return window.removeEventListener("scroll",l)}}),[]),(0,t.jsx)(C,{ref:s,children:(0,t.jsx)(Z.ZP,D(D({mapStyle:"mapbox://styles/santdas36/cks0kblsg0vyx17qw3jc0vqtv",mapboxApiAccessToken:"pk.eyJ1Ijoic2FudGRhczM2IiwiYSI6ImNrZzBlNG9mcDJncXoyeXM4enY2ZjZmeXgifQ.1nUvNLjy9AS8sDvCRJnvNg"},i),{},{width:"100%",height:"100%",className:"mapgl-container",onViewportChange:function(n){return a(n)},children:e.map((function(n,e){return(0,t.jsxs)("div",{children:[(0,t.jsx)(Z.Jx,{longitude:n.long,latitude:n.lat,children:(0,t.jsx)("p",{role:"img",className:"mapMarker ".concat(r.long===n.long?"active":null),onClick:function(){return o(D(D({},n),{},{index:e}))},"aria-label":"push-pin",children:(0,t.jsx)(z.Z,{className:"mapPin"})})}),r.long===n.long&&(0,t.jsx)(Z.GI,{onClose:function(){return o({})},closeOnClick:!0,latitude:n.lat,longitude:n.long,className:"popup",children:(0,t.jsxs)(q,{bg:w.VW[r.index][0],children:[(0,t.jsx)("h5",{children:n.title}),(0,t.jsx)("h4",{children:n.price})]})})]},n.long)}))}))})}var C=d.ZP.div(E()),q=d.ZP.div(M(),(function(n){return n.bg})),I=r(2219),A=!0;function R(n){var e=n.searchResults,r=(0,p.useRouter)(),s="".concat(r.query.location," | ").concat((0,m.default)(new Date(r.query.checkIn),"d MMM, yy")," | ").concat((0,m.default)(new Date(r.query.checkIn),"d MMM, yy")," | ").concat(r.query.guests," guests"),l=(0,c.useState)({}),d=l[0],u=l[1],g=(0,o.Z)(e).slice(1).map((function(n){return{longitude:n.long,latitude:n.lat}})),h=(0,I.Z)(g),f=(0,c.useState)({latitude:h.latitude,longitude:h.longitude,zoom:11}),b=f[0],x=f[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{placeholder:s}),(0,t.jsxs)("main",{children:[(0,t.jsx)(L,{results:e,selectedLocation:d,setSelectedLocation:u,viewport:b,setViewport:x}),(0,t.jsx)(P,{setSelectedLocation:u,results:e,setViewport:x})]}),(0,t.jsx)(a.Z,{})]})}},8161:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(7802)}])}},function(n){n.O(0,[774,634,178,467,218,888,179],(function(){return e=8161,n(n.s=e);var e}));var e=n.O();_N_E=e}]);